"use strict";function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}System.register("router",[],function(a,b){"use strict";var c,d=b&&b.id;return{setters:[],execute:function execute(){c=class{constructor(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.hashChar="#",this.onErrorHandler=a=>{throw new Error("Unknown route: ".concat(a.hashChangedEvent.newURL))},this.onBeforeNavigateHandler=()=>{},this.onBeforeLeaveHandler=()=>{},this.onNavigateHandler=()=>{},this.onLeaveHandler=()=>{},a=Object.assign({element:document.body,hashChar:"#",test:a=>/^[A-Za-z0-9_@()/.-]*$/.test(a)},a),this.hashChar=a.hashChar,this.routes={};for(var f of a.element.querySelectorAll("[data-route]")){var e=f,g=e.dataset.route;if(!a.test(g))throw new Error("Invalid route definition: ".concat(g));if(!g.startsWith("/"))throw new Error("Invalid route definition: ".concat(g));var b={},c=null,d=e.dataset.routeParams;if(!d)c=new Map;else try{b=JSON.parse(d),c=new Map(Object.entries(b))}catch(a){console.error("Couldn't deserialize default params for route ".concat(g,": ").concat(a,".\nMake sure that \"").concat(d,"\" is valid JSON..."))}var h=e.dataset.routeTemplateUrl;h||(h=null),this.routes[g]={route:g,element:e,defaultParams:b,paramMap:c,params:{},templateUrl:h}}}start(){return window.addEventListener("hashchange",a=>this.onHashChange(a)),window.dispatchEvent(new HashChangeEvent("hashchange")),this}onError(a){return this.onErrorHandler=a,this}onNavigate(a){return this.onNavigateHandler=a,this}onLeave(a){return this.onLeaveHandler=a,this}onBeforeNavigate(a){return this.onBeforeNavigateHandler=a,this}onBeforeLeave(a){return this.onBeforeLeaveHandler=a,this}navigate(a){return document.location.hash=this.hashChar+a,this}reveal(a){return this.revealUri(a,null)}onHashChange(a){var b=document.location.hash;b&&a.newURL&&(b=a.newURL.replace(document.location.origin+document.location.pathname,"")),b=b.replace(document.location.search,""),this.revealUri(b.replace(this.hashChar,""),a)}revealUri(a,b){var c=this;return _asyncToGenerator(function*(){var d,e,f,g,h,j=a.split("/").map(a=>decodeURIComponent(a)),k="";for(f=0,g=j.length;f<g;f++){var t=j[f];k=k.endsWith("/")?k+t:k+"/"+t,e=c.routes[k],(e&&!d||e&&d.route.length<e.route.length)&&(d=e,h=f+1)}if(c.current){var u=c.buildRouteEventArgs(c.current,b);c.onBeforeLeaveHandler(u),c.current.element.style.display="none",c.onLeaveHandler(u)}""==j[j.length-1]&&j.splice(-1,1);var l=j.slice(h);if(d)if(l.length>d.paramMap.size)d=null;else if(d.params=Object.assign({},d.defaultParams),d.paramMap=new Map(Object.entries(d.params)),l.length){var v=Array.from(d.paramMap.keys());for(f=0,g=l.length;f<g;f++){var m=l[f],n=v[f];d.paramMap.set(n,m),d.params[n]=m}}if(d){c.current=d;var w=c.buildRouteEventArgs(c.current,b);if(c.onBeforeNavigateHandler(w),d.templateUrl){var o,p=[],q=0,r=Array.from(d.paramMap.values());for(var x of d.templateUrl.split(/{/))o=x.indexOf("}"),-1==o?p.push(x):p.push(r[q++]+x.substring(o+1,x.length));var y=yield fetch(p.join(""),{method:"get"});y.ok||c.onErrorHandler(w),d.element.innerHTML=yield y.text()}return c.current.element.style.display="contents",c.onNavigateHandler(w),w}c.current=null;var s=c.buildRouteEventArgs(null,b);return c.onErrorHandler(s),s})()}buildRouteEventArgs(a,b){return{route:null==a?null:a.route,params:null==a?null:a.params,router:this,element:null==a?null:a.element,hashChangedEvent:b}}},a("default",c)}}}),System.register("main",["router"],function(a,b){"use strict";var c,d,e=b&&b.id;return{setters:[function(a){c=a}],execute:function execute(){d=(a,b,c)=>{var d=a.querySelector(b);d&&(d.innerHTML=c)},new c.default().onNavigate(a=>d(a.element,".params",JSON.stringify(a.params))).onError(a=>a.router.reveal("/error").then(a=>d(a.element,"code",document.location.hash))).start()}}});
